{
  "pattern": "git-hooks",
  "name": "Git Hooks com Husky",
  "description": "Hooks Git para garantir qualidade e seguran√ßa do c√≥digo",

  "installation": {
    "packages": ["husky"],
    "devDependencies": true
  },

  "setup": {
    "initCommand": "npx husky init",
    "directory": ".husky"
  },

  "hooks": {
    "pre-commit": {
      "description": "Executa lint, typecheck e scan de seguran√ßa antes do commit",
      "script": "#!/usr/bin/env sh\n. \"$(dirname -- \"$0\")/_/husky.sh\"\n\necho \"üîç Verificando c√≥digo antes do commit...\\n\"\n\n# Executar lint\necho \"üìù Lint...\"\npnpm lint || {\n  echo \"\\n‚ùå Erro no lint. Corrija os erros antes de commitar.\"\n  exit 1\n}\n\n# Executar typecheck\necho \"\\nüî∑ TypeScript...\"\npnpm typecheck || {\n  echo \"\\n‚ùå Erro no typecheck. Corrija os erros de tipo antes de commitar.\"\n  exit 1\n}\n\n# Executar scan de seguran√ßa\nif [ -f \".zoryon/security/scan.mjs\" ]; then\n  echo \"\\nüîí Seguran√ßa...\"\n  node .zoryon/security/scan.mjs || {\n    echo \"\\n‚ùå Problemas de seguran√ßa detectados. Remova secrets antes de commitar.\"\n    exit 1\n  }\nfi\n\necho \"\\n‚úÖ Tudo certo! Prosseguindo com o commit...\\n\"\n"
    },

    "commit-msg": {
      "description": "Valida o formato da mensagem de commit (Conventional Commits)",
      "script": "#!/usr/bin/env sh\n. \"$(dirname -- \"$0\")/_/husky.sh\"\n\n# Ler mensagem do commit\ncommit_msg=$(cat \"$1\")\n\n# Padr√£o: tipo(escopo opcional): mensagem\n# Tipos v√°lidos: feat, fix, docs, style, refactor, test, chore, perf, ci, build, revert\npattern=\"^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\\(.+\\))?: .{1,}\"\n\nif ! echo \"$commit_msg\" | grep -qE \"$pattern\"; then\n  echo \"‚ùå Formato de commit inv√°lido!\\n\"\n  echo \"Use o formato: tipo(escopo): mensagem\\n\"\n  echo \"Exemplos:\"\n  echo \"  feat: adicionar autentica√ß√£o com Clerk\"\n  echo \"  fix(api): corrigir erro no endpoint de usu√°rios\"\n  echo \"  docs: atualizar README\\n\"\n  echo \"Tipos v√°lidos:\"\n  echo \"  feat     - Nova funcionalidade\"\n  echo \"  fix      - Corre√ß√£o de bug\"\n  echo \"  docs     - Documenta√ß√£o\"\n  echo \"  style    - Formata√ß√£o, ponto e v√≠rgula, etc\"\n  echo \"  refactor - Refatora√ß√£o de c√≥digo\"\n  echo \"  test     - Adicionar/modificar testes\"\n  echo \"  chore    - Tarefas de manuten√ß√£o\"\n  echo \"  perf     - Melhorias de performance\"\n  echo \"  ci       - Mudan√ßas em CI/CD\"\n  echo \"  build    - Mudan√ßas no build\"\n  echo \"  revert   - Reverter commit anterior\\n\"\n  exit 1\nfi\n"
    },

    "pre-push": {
      "description": "Executa testes antes do push (se existirem)",
      "script": "#!/usr/bin/env sh\n. \"$(dirname -- \"$0\")/_/husky.sh\"\n\necho \"üß™ Verificando testes antes do push...\\n\"\n\n# Verificar se h√° testes configurados\nif grep -q '\"test\"' package.json; then\n  echo \"Executando testes...\"\n  pnpm test || {\n    echo \"\\n‚ùå Testes falharam. Corrija antes de fazer push.\"\n    exit 1\n  }\n  echo \"\\n‚úÖ Todos os testes passaram!\\n\"\nelse\n  echo \"‚ÑπÔ∏è  Nenhum teste configurado. Pulando verifica√ß√£o.\\n\"\nfi\n"
    }
  },

  "packageJsonScripts": {
    "prepare": "husky install"
  },

  "examples": {
    "skipHook": "git commit --no-verify -m 'mensagem'",
    "testHook": "sh .husky/pre-commit"
  },

  "documentation": {
    "url": "https://typicode.github.io/husky/",
    "commitConventions": "https://www.conventionalcommits.org/"
  }
}

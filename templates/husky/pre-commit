#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Verificando cÃ³digo antes do commit..."

# Lint
echo "ğŸ“ Executando lint..."
pnpm lint || {
  echo "âŒ Lint falhou. Corrija os erros antes de fazer commit."
  echo "   Dica: execute 'pnpm lint --fix' para corrigir automaticamente."
  exit 1
}

# Typecheck
echo "ğŸ“˜ Verificando tipos..."
pnpm typecheck || {
  echo "âŒ Typecheck falhou. Corrija os erros de tipo."
  exit 1
}

# Security scan
echo "ğŸ”’ Verificando seguranÃ§a..."
node .zoryon/security/scan.mjs || {
  echo "âŒ Problemas de seguranÃ§a encontrados."
  echo "   Corrija antes de fazer commit."
  exit 1
}

echo "âœ… Tudo certo! Continuando com o commit..."
